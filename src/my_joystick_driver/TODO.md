# Joystick Driver 开发任务清单

## v1.0 基础功能（初始版本）
- [x] 基础手柄驱动实现（使用 evdev 库读取 Linux 输入事件）
- [x] 消息定义（Joystick.msg）
- [x] 自动设备检测（扫描 /dev/input/event*）
- [x] 定时发布机制（20Hz 固定频率）
- [x] 基础按键和摇杆映射
- [x] 蓝牙/USB 连接支持

## v2.0 增强功能（2026-01-29 完成）
- [x] 数据归一化到 ±8192（从 float32 ±1.0 改为 int32 ±8192）
- [x] 死区过滤实现（410 单位，约 5% 阈值）
- [x] 断线自动归零保护
- [x] ROS2 参数化配置系统
  - [x] auto_detect 参数（自动检测开关）
  - [x] device_path 参数（手动指定设备路径）
  - [x] device_name_filter 参数（设备名称过滤器）
- [x] 详细设备调试信息（连接失败时打印所有可用设备）
- [x] 多品牌手柄支持（8BitDo, Xbox, PS5 等）
- [x] 完整 README 文档
  - [x] ROS2 接口参考章节
  - [x] 蓝牙连接教程
  - [x] 完整故障排查流程
  - [x] 升级说明对比

## v2.1 规范化改进（当前进行中）
- [x] 添加 TODO.md（符合 AGENTS.md 规范）
- [x] README 添加 Changelog 章节
- [x] 超时保护机制文档化
- [ ] 单元测试（基础功能覆盖）
- [ ] CI/CD 集成

## 待完成功能
- [ ] 按键映射可配置化（通过 YAML 参数文件）
- [ ] 多手柄同时支持（发布到不同 namespace）
- [ ] 手柄振动反馈功能（力反馈支持）
- [ ] QoS Deadline 超时检测（订阅端看门狗）
- [ ] 电池电量监测（如果手柄支持）
- [ ] 手柄固件版本检测
- [ ] 性能监控（发布延迟统计）

## 已知问题
- [ ] 某些 Xbox 手柄的扳机初始值为 -32768（需要特殊处理）
- [ ] D-pad 在某些手柄上映射不一致
- [ ] 蓝牙连接断开后，有时需要手动重新配对

## 优化计划
- [ ] 减少 CPU 占用（优化事件循环）
- [ ] 支持动态调整发布频率
- [ ] 添加手柄校准工具
- [ ] 支持自定义按键宏（组合键）
